# Minimum Consistent DFA — project README

This repository contains a Gecode‑based solver that constructs a minimal deterministic finite automaton (DFA) consistent with two sample sets — **Acc** (accepted words) and **Rej** (rejected words).  
The project hierarchy is kept minimal:

```
├── src/
│   ├── solver.cpp       # main Gecode model (build target: dfa)
│   ├── Makefile         # Linux build rules
│   └── make_diagrams.py # optional helper: batch run + checker + diagrams
├── instances/           # *.inp test‑cases (input)
├── out/                 # *.out solver answers (output)
└── diagrams/            # *.png visualisations generated by checker
```

---

## 1  Prerequisites

| Requirement        | Tested version(s) | Notes                             |
|--------------------|-------------------|-----------------------------------|
| **g++**            | 11 / 12 / 13      | Must support C++17.               |
| **Gecode** libs    | 6.4 or newer      | Install via distro packages or build from source. Required libs: `gecodeint`, `gecodesearch`, `gecodeminimodel`, `gecodekernel`, `gecodesupport`. |
| **Python 3**       | 3.9 +             | Only for the helper script.       |

> On Ubuntu / Debian:
> ```bash
> sudo apt install g++ libgecode-dev python3
> ```

---

## 2  Build instructions

1. **Enter the source directory**
   ```bash
   cd src
   ```
2. **Compile**  
   The supplied *Makefile* already contains correct include‑/link‑flags for Gecode:
   ```bash
   make          # builds the executable `dfa`
   ```
   Successful build leaves you with `dfa` in the same directory.

---

## 3  Running the solver on a single instance

```bash
./dfa < ../instances/filename.inp > ../out/filename.out
```
* **stdin**  – instance file (`.inp`),
* **stdout** – solution file (`.out`).

> A non‑empty `.out` indicates a DFA was found; an empty (or missing) file means the search exceeded the time‑limit or the instance is inconsistent.

You can manually call the contest‑supplied checker to verify:
```bash
./checker.exe < ../out/filename.out
```
If the checker prints `OK` and `Plotting solution to file tmp.png`, the DFA is correct; it also generates a quick visualisation (`tmp.png`).

---

## 4  Batch mode + diagrams (optional)

`make_diagrams.py` automates the whole pipeline:

```bash
python3 make_diagrams.py \
       --checker ../checker.exe \
       --out ../out \
       --dst ../diagrams
```

1. **Iterates** over every `*.inp` in `../instances/`, runs `dfa`, saves answers into `../out/`.
2. **Checks** each answer with `checker.exe`, prints `OK / NO  GOOD / ERROR …` to the terminal.
3. **Moves** generated `tmp.png` into `../diagrams/<instance>.png` so they never overwrite each other.

Default arguments match the folder names above, so the short form is usually enough:
```bash
python3 make_diagrams.py
```

---

## 5  Troubleshooting

| Symptom                               | Fix |
|---------------------------------------|-----|
| `make` fails with *gecode… not found* | Verify that libgecode‑dev (or self‑built Gecode) is installed and headers are in compiler’s include path. |
| `./dfa` silently produces **empty** `.out` | The search did not find a DFA within the 60 s internal timeout → try a faster machine or check if instance files violate format (same word in both sets). |
| `checker.exe: No such file or directory` | Place the official checker binary in the project root or pass `--checker /path/to/checker.exe` to the Python script. |

---

**Enjoy solving automata puzzles!**

